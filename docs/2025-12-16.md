# Rotina de Desenvolvimento - 16/12/2025

**Projeto:** Crypto Alert  
**Criado em:** 2025-12-16  
**Ãšltima atualizaÃ§Ã£o:** 2025-12-16 (SESSÃƒO 5)

---

## ğŸ“‹ Resumo do Dia

### SessÃ£o 1: MonetizaÃ§Ã£o
- ImplementaÃ§Ã£o do modelo Freemium com anÃºncios (AdMob) e compras in-app

### SessÃ£o 2: Multi-Moedas
- App monitora **3 criptomoedas**: Bitcoin, Ethereum e XRP
- **GrÃ¡ficos de histÃ³rico** para cada moeda (Ãºltimos 7 dias)
- **Indicadores de tendÃªncia** com setinhas animadas (â†‘â†“)
- AtualizaÃ§Ã£o **a cada 10 segundos**

### SessÃ£o 3: Simulador de Investimento
- **Simulador de investimento** para cada moeda
- CÃ¡lculo de **lucro/prejuÃ­zo** em tempo real
- **Resumo do portfÃ³lio** total
- PersistÃªncia local dos investimentos

### SessÃ£o 4: ConfiguraÃ§Ãµes + Tesouro Direto + Lifecycle
- **Threshold configurÃ¡vel** (1% a 15%, padrÃ£o 10%)
- **Badge de aÃ§Ã£o** COMPRAR/VENDER/MANTER nos cards
- **Card Tesouro Direto** com taxa SELIC real do BCB
- **Tela de ConfiguraÃ§Ãµes** com slider
- **Pause automÃ¡tico** quando app em background (economiza bateria/requisiÃ§Ãµes)
- BotÃ£o "Simular" mais intuitivo (estilo pill)

### SessÃ£o 5: GrÃ¡ficos em Tempo Real + Ãcone Personalizado
- **Seletor de perÃ­odo** para grÃ¡ficos: 24H, 7D, 1M, 1A
- **GrÃ¡ficos atualizam em tempo real** a cada 60 segundos
- HistÃ³rico completo recarrega a cada 5 minutos
- **Novo Ã­cone do app** personalizado (radar de mercado)
- RefatoraÃ§Ã£o do ChartPeriod enum para perÃ­odos dinÃ¢micos

---

## ğŸ¯ Arquitetura Atual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CRYPTO ALERT v3                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ’¼ MEU PORTFÃ“LIO                                      â”‚ â”‚
â”‚  â”‚  Valor atual: R$ 15.234,56                             â”‚ â”‚
â”‚  â”‚  â†‘ +R$ 1.234,56 (+8.8%)                               â”‚ â”‚
â”‚  â”‚  Investido: R$ 14.000,00                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸŸ  Bitcoin (BTC)                    â†‘                â”‚ â”‚
â”‚  â”‚  ~~~~~ğŸ“ˆ~~~~~                                         â”‚ â”‚
â”‚  â”‚  R$ 523.456,78              +2.5%                     â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚ â”‚
â”‚  â”‚  ğŸ’° Investido: R$ 5.000    Atual: R$ 5.500   +10%    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸŸ£ Ethereum (ETH)                   â†“                â”‚ â”‚
â”‚  â”‚  ~~~~~ğŸ“‰~~~~~                                         â”‚ â”‚
â”‚  â”‚  R$ 18.234,56               -1.2%                     â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚ â”‚
â”‚  â”‚  [+ Simular investimento]                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Implementado na SessÃ£o 3

### Novos Models
- [x] `lib/models/investment.dart`
  - Classe `Investment` - representa um investimento simulado
  - Classe `PortfolioSummary` - resumo do portfÃ³lio total
  - CÃ¡lculos de P&L (lucro/prejuÃ­zo)

### Novos Services
- [x] `lib/services/investment_service.dart`
  - Persiste investimentos com SharedPreferences
  - Calcula resumo do portfÃ³lio
  - Listener para atualizaÃ§Ãµes

### Novos Widgets
- [x] `lib/ui/widgets/investment_input.dart`
  - Dialog para inserir valor de investimento
  - Preview de quantidade de moedas
  - EdiÃ§Ã£o/remoÃ§Ã£o de investimentos
- [x] `lib/ui/widgets/portfolio_summary_card.dart`
  - Card de resumo do portfÃ³lio
  - Indicador de P&L
  - Gradiente verde/vermelho baseado no lucro

### AtualizaÃ§Ãµes
- [x] `lib/ui/widgets/crypto_card.dart` - SeÃ§Ã£o de investimento
- [x] `lib/ui/screens/home_screen.dart` - IntegraÃ§Ã£o completa

---

## ğŸ“ Estrutura de Arquivos Completa

```
lib/
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ bitcoin_controller.dart    (legado)
â”‚   â””â”€â”€ crypto_controller.dart
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ bitcoin_price.dart         (legado)
â”‚   â”œâ”€â”€ crypto_price.dart
â”‚   â”œâ”€â”€ investment.dart            â† NOVO
â”‚   â””â”€â”€ subscription.dart
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ad_service.dart
â”‚   â”œâ”€â”€ coin_gecko_service.dart    (legado)
â”‚   â”œâ”€â”€ crypto_service.dart
â”‚   â”œâ”€â”€ firebase_service.dart
â”‚   â”œâ”€â”€ investment_service.dart    â† NOVO
â”‚   â”œâ”€â”€ notification_service.dart
â”‚   â””â”€â”€ subscription_service.dart
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â””â”€â”€ home_screen.dart       â† ATUALIZADO
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ action_indicator.dart
â”‚       â”œâ”€â”€ conditional_banner.dart
â”‚       â”œâ”€â”€ crypto_card.dart       â† ATUALIZADO
â”‚       â”œâ”€â”€ investment_input.dart  â† NOVO
â”‚       â”œâ”€â”€ paywall_sheet.dart
â”‚       â”œâ”€â”€ portfolio_summary_card.dart â† NOVO
â”‚       â”œâ”€â”€ price_card.dart        (legado)
â”‚       â”œâ”€â”€ price_chart.dart
â”‚       â””â”€â”€ trend_indicator.dart
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ config.dart
â”‚   â””â”€â”€ store_config.dart
â””â”€â”€ main.dart
```

---

## ğŸ§® Funcionalidades do Simulador

| Feature | DescriÃ§Ã£o |
|---------|-----------|
| **Investir** | Define quanto "investiu" em cada moeda |
| **PreÃ§o de Compra** | Usa o preÃ§o atual como referÃªncia |
| **Quantidade** | Calcula quantas moedas "compraria" |
| **Valor Atual** | Atualiza em tempo real com o preÃ§o |
| **Lucro/PrejuÃ­zo** | Mostra ganho/perda em R$ e % |
| **PortfÃ³lio Total** | Soma todos os investimentos |
| **PersistÃªncia** | Salva localmente no dispositivo |

---

## ğŸ“Š Exemplo de CÃ¡lculo

```
Investimento:
- Moeda: Bitcoin
- Valor investido: R$ 1.000,00
- PreÃ§o na "compra": R$ 500.000,00
- Quantidade: 0.002 BTC

Agora (preÃ§o subiu):
- PreÃ§o atual: R$ 550.000,00
- Valor atual: 0.002 Ã— 550.000 = R$ 1.100,00
- Lucro: R$ 100,00 (+10%)
```

---

## âœ… Implementado na SessÃ£o 4

### Novos Models
- [x] `lib/models/tesouro_simulation.dart`
  - CÃ¡lculo de juros compostos
  - Classes TempoOption e TempoOptions

### Novos Services
- [x] `lib/services/settings_service.dart`
  - Persiste threshold com SharedPreferences
  - MÃ©todo getSuggestedAction()
  - Enum SuggestedAction
- [x] `lib/services/selic_service.dart`
  - Busca taxa SELIC da API do Banco Central
  - Cache de 24h

### Novos Widgets/Screens
- [x] `lib/ui/widgets/tesouro_card.dart`
  - Simulador de Tesouro Selic
  - Input de valor e dropdown de tempo
  - Resultado com ganho formatado
- [x] `lib/ui/screens/settings_screen.dart`
  - Slider de threshold (1% a 15%)
  - Preview visual das aÃ§Ãµes
  - ExplicaÃ§Ã£o da lÃ³gica

### AtualizaÃ§Ãµes
- [x] `lib/utils/config.dart` - Threshold 10%, limites, URL BCB
- [x] `lib/ui/widgets/crypto_card.dart` - Badge de aÃ§Ã£o, botÃ£o pill
- [x] `lib/ui/screens/home_screen.dart` - WidgetsBindingObserver, lifecycle

---

## âœ… Implementado na SessÃ£o 5

### AtualizaÃ§Ãµes
- [x] `lib/utils/config.dart` - Enum ChartPeriod (24H, 7D, 1M, 1A)
- [x] `lib/services/crypto_service.dart` - Suporte a diferentes perÃ­odos
- [x] `lib/controllers/crypto_controller.dart` - Timer de histÃ³rico, tempo real
- [x] `lib/ui/widgets/price_chart.dart` - ChartPeriodSelector widget
- [x] `lib/ui/screens/home_screen.dart` - Seletor global de perÃ­odo
- [x] Ãcone personalizado do app gerado

---

## ğŸ”œ PrÃ³ximos Passos

1. [ ] Testar app no dispositivo fÃ­sico
2. [ ] Implementar push notifications reais
3. [ ] Adicionar mais tÃ­tulos do Tesouro (IPCA+, Prefixado)
4. [ ] GrÃ¡fico de evoluÃ§Ã£o do portfÃ³lio
5. [ ] Exportar dados do portfÃ³lio

---

## ğŸ“Š EstatÃ­sticas Totais do Dia

| MÃ©trica | SessÃ£o 1 | SessÃ£o 2 | SessÃ£o 3 | SessÃ£o 4 | SessÃ£o 5 | Total |
|---------|----------|----------|----------|----------|----------|-------|
| Arquivos criados | 6 | 6 | 4 | 5 | 1 | **22** |
| Arquivos modificados | 5 | 4 | 2 | 3 | 5 | **19** |
| Linhas adicionadas | ~800 | ~700 | ~600 | ~700 | ~200 | **~3000** |
